# Решение конфликта маршрутов в DigitalOcean

## Проблема

Ошибка: `path prefix "/" already in use by rule with component: "web"`

Это происходит потому что:
1. Уже существует компонент `winplacearena2` с маршрутом "/"
2. При попытке добавить второй сервис возникает конфликт

## Решение: Пересоздать компоненты

### Вариант 1: Удалить и пересоздать (Рекомендуется)

1. **Удалите существующий компонент:**
   - Зайдите в настройки приложения
   - Найдите компонент `winplacearena2`
   - Удалите его

2. **Создайте оба сервиса заново через App Spec:**
   - Перейдите в **Settings** → **App Spec**
   - Вставьте полную конфигурацию из `.do/app.yaml`
   - Сохраните

### Вариант 2: Переименовать существующий компонент

1. **Переименуйте существующий компонент:**
   - Зайдите в настройки компонента `winplacearena2`
   - Измените имя на `web`
   - Убедитесь, что у него есть маршрут `path: /`

2. **Добавьте второй компонент вручную:**
   - Нажмите **"Add Component"**
   - Создайте сервис `api`:
     - Name: `api`
     - Type: `Web Service`
     - Source: GitHub → `grinevoleg/winplacearena` → `main`
     - Source Directory: `backend`
     - Dockerfile: `backend/Dockerfile`
     - Port: `8000`
     - **ВАЖНО: НЕ добавляйте routes для api!**

### Вариант 3: Пересоздать все приложение

Если ничего не помогает:

1. **Создайте новое приложение:**
   - Удалите старое приложение
   - Создайте новое через **"Create App"**
   - Выберите GitHub → `grinevoleg/winplacearena` → `main`

2. **При создании выберите "Edit App Spec":**
   - Вставьте содержимое `.do/app.yaml`
   - DigitalOcean создаст оба сервиса правильно

## Правильная конфигурация

Убедитесь, что в конфигурации:
- ✅ **api** сервис НЕ имеет `routes` (только внутренний URL)
- ✅ **web** сервис имеет `routes: - path: /` (публичный фронтенд)

## После исправления

Должно быть два компонента:
- **api** - Backend API (без публичных маршрутов)
- **web** - Frontend (с маршрутом "/")

